<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">

    <title>Video Uploader</title>
</head>
<div style="width:80%;margin-left: auto;margin-right: auto">
    <h2 style="text-align: center">Welcome to Uploader!</h2>

    <!--<img src={% static 'images/plus_circle_black.png' %}>-->


    <div class="upload_form" style="width:30%;margin-left: auto;margin-right: auto;text-align: center">

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p>Выбрать видеофайл</p>
            <input type='file' name="video" title="Выбрать видеофайл">
            <p>Добавить постер (не обязательно)</p>
            <input type="file" name="poster" title="Добавить постер" >
            <br>
            <button type="submit" style="margin-top:5%">Отправить</button>
        </form>


    </div>

    <div class="video_list" style="display: inline-block;margin-top:3%">

        {% for file in files %}

            <figure style="display: inline-block">
                {% if file.poster %}
                    <video class="video_layout" src="{{ file.url }}" controls width="400" height="300" preload=none poster={{ file.poster.url }}></video>
                {% else %}
                    {% if file.size > 150 %}
                        <video class="video_layout" src="{{ file.url }}" controls width="400" height="300" preload=none poster={% static 'images/large_file.webp' %}></video>
                    {% else %}
                    <video class="video_layout" src="{{ file.url }}" controls width="400" height="300" preload=metadata ></video>
                    {% endif %}
                {% endif %}
                <br>
                <figcaption style="width:97%;display: inline-block;text-align: center">{{ file.name }}</figcaption>
                <a href="{% url 'удалить видео' file.id %}" class="close_button" style="width:3%;display:block;float:right">X</a>
            </figure>

        {% endfor %}

    </div>
</div>

</body>
</html>
